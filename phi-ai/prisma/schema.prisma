generator client {
	provider = "prisma-client-js"
}

datasource db {
	provider = "sqlite"
	url      = env("DATABASE_URL")
}

model Chat {
	id           String    @id @default(cuid())
	title        String
	createdAt    DateTime  @default(now())
	updatedAt    DateTime  @updatedAt
	messages     Message[]
	liked        Boolean   @default(false)
	disliked     Boolean   @default(false)
}

model Message {
	id        String   @id @default(cuid())
	chatId    String
	role      String
	content   String
	citations Json?
	thinking  String?
	createdAt DateTime @default(now())

	chat Chat @relation(fields: [chatId], references: [id], onDelete: Cascade)
}

model Feedback {
	id        String   @id @default(cuid())
	chatId    String?
	messageId String?
	type      String   // like | dislike | bug | idea | general
	comment   String?
	createdAt DateTime @default(now())
}

model AnalyticsEvent {
	id        String   @id @default(cuid())
	type      String
	meta      Json
	createdAt DateTime @default(now())
}

model Credits {
	id        Int      @id @default(1)
	date      DateTime @default(now())
	remaining Int
}